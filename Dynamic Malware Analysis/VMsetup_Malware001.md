# Hello World, This will be one of my Dynamic Malware Analysis project

<img src="https://github.com/TommyP702/TanPham/assets/169327735/8f000cd9-042f-49d2-8ddd-a2e1f3e54457" alt="Image from GitHub" class="wp-image-5001" width="400" height="300"/>


I'll be guiding you through the steps and processes I'll be taking. Lets have some fun!

<p class="has-text-align-center"><strong>Steps</strong></p>

<!-- wp:group {"layout":{"type":"flex","orientation":"vertical"},"fontSize":"small"} -->
<div class="wp-block-group has-small-font-size"><!-- wp:list {"ordered":true} -->
<ol><!-- wp:list-item -->
<li><a href="#1">Using tools and software that are needed to be able to analyze (Process Hacker, Sysmon, RegShot, Wireshark)</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#2">Creating a Virtual Machine for dynamic malware analysis</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#3">Analyzing Process, Network, Registry, and File Activities</a></li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li><a href="#4">How to bypass some anti-malware analysis methods (disable windows defender / registry) </a></li>
<!-- /wp:list-item -->

<!-- wp:separator -->
<hr class="wp-block-separator has-alpha-channel-opacity"/>
<!-- /wp:separator -->

<!-- wp:paragraph {"align":"center","backgroundColor":"pale-cyan-blue"} -->
<p class="has-text-align-center has-pale-cyan-blue-background-color has-background" id="1"><strong>Preparation Phase</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Before anything I recommed you download VMware or Virtualbox. Our goal is to analyze the malware in a secure setting and prevent it from setting up a C2 by disabling the local IP. </p>
<!-- /wp:paragraph -->

<img src="https://github.com/TommyP702/TanPham/assets/169327735/939def7b-1f78-419d-8e1a-02f154cba8c8)" alt="" class="wp-image-5001"/></figure>

<p>#note don't change your NAT adapter yet until we download all softwares</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/22d0a5a1-e0bd-4d72-b7bd-c74a6f7cdd37)" alt="" class="wp-image-5001"/></figure>

<!-- wp:paragraph -->
<p>Once done setting up your win10 pro. Let installs Vbox guest additons, software tools, disable window defender etc before we take a snapshot for future malware projects.</p>
<!-- /wp:paragraph -->

<img src="https://github.com/TommyP702/TanPham/assets/169327735/23c222d9-14b1-4990-8c85-62b031e03182" alt="" class="wp-image-5001"/>

<p>#above are the list of programs we will use in our projects (you can find them through google)</p>

<!-- wp:separator -->
<hr class="wp-block-separator has-alpha-channel-opacity"/>
<!-- /wp:separator -->

<!-- wp:paragraph {"align":"center","backgroundColor":"pale-cyan-blue"} -->
<p class="has-text-align-center has-pale-cyan-blue-background-color has-background" id="1"><strong>Disabling Realtime Protection and Windows Defender</strong></p>
<!-- /wp:paragraph -->

<img src="https://github.com/TommyP702/TanPham/assets/169327735/e52a3997-67b3-429f-a003-579541691865" alt="" class="wp-image-5001"/>

<!-- wp:paragraph -->
<p>Press Win + R then type in "services.msc"</p>
<!-- /wp:paragraph -->

<img src="https://github.com/TommyP702/TanPham/assets/169327735/eedb2016-051c-4593-a136-7a532e3d0414" alt="" class="wp-image-5001"/>

<p>Disable automatic update so windows can't patch anything"</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/68ba69ab-e890-44e5-af42-75fbcee721c2" alt="" class="wp-image-5001"/>

<p>Search for Virus & Threat proection settings in the control panel and then disable "real time, cloud, sample submission, and tamper Protections in the GUI, next we're gonna go into group policy to permanently disable everything. "</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/2cb4a232-e18d-41b4-8d5e-ddd6dec2bea5" alt="" class="wp-image-5001"/>

<p>Win + R type in "gpedit.msc"</p>
<p>on the left of the tree console navigate from Computer Configuration -> Administrative templates -> Windows Components -> Microsoft Defender Antivirus. </p>
<p>On the right of the console double click "Real-Time Protection"</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/8fdf58cd-7008-46f7-a1da-270be54ee568" alt="" class="wp-image-5001"/>

<p>Click on the "Microsoft Defender Antivirus folder" on the right colum click on "Turn off microsoft Defender Antivirus and change it to Enable.</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/7c09afc4-b1f1-4ab4-9734-171433bd5d65" alt="" class="wp-image-5001"/>

<p>Click on the "Microsoft Defender Antivirus folder" click the left folder icon ">" and scroll down to sub folder "real time protection" and then on the right colum click on "monitor file and program activity on your computer" and disable it </p>


<img src="https://github.com/TommyP702/TanPham/assets/169327735/f3f06cf3-e924-4d74-8211-ef0d5fadca5e" alt="" class="wp-image-5001"/>

<p>Click on the Real-time Protection folder then click "turn off real-time protection" and Enable it, apply, State colum should changed from Not configured to Enable.</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/dd090947-d32f-449c-b6d9-a7418dd402af" alt="" class="wp-image-5001"/>
<p>Next lets open up file explorer, its the folder icon on the bottom left. Once open click on the "View on the top left and on the right should show "Options" there it will pop up Folder Options and we're going to change 2 setting.</p>

<p>Check "show hidden files, folders, and devices.</p>
<p>Uncheck "Hide extension for known file types..</p>

<p>This now tells us how malware can use certain exe file to trick users for example "resume.pdf.exe" the file itself is a executable but the victim would assume its just another PDF file.</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/ccf55d4a-d62f-4544-b7db-7079bc9d998a" alt="" class="wp-image-5001"/>

<p>Go to Window Defender Fire > Customize settings and turn both public and privite network settings off.</p>

<p>After this we need just 2 more step and we are ready to save all our configuration in a snapshot.</p>
<p>We're going to disable ASLR (Address Space Layout Randomization) its part of windows anti-exploit security mechanism</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/418317bd-abb3-4484-81b3-48aed70df0d7" alt="" class="wp-image-5001"/>

<p>Open your registry editor. WIN + R type in "regedit" copy and paste folder location "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management" then create a “REG_DWORD” type key named “MoveImages”. This settings will disable the ASLR feature. </p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/418317bd-abb3-4484-81b3-48aed70df0d7" alt="" class="wp-image-5001"/>

<p>Change your OS name too. (the reason for this is because sometime malware are coded where it can detect any sign the OS is actually in a virutal machine) we want to trick the malware.exe as much as possible</p>
<img src="https://github.com/TommyP702/TanPham/assets/169327735/5c86128e-16dc-4ef9-95b2-8fb409135cce" alt="" class="wp-image-5001"/>

<p class="has-text-align-center has-pale-cyan-blue-background-color has-background" id="1"><strong>THIS IS VERY IMPORTANT</strong></p>

<p>The last step is to change our VM Network Adapter "network connection" because we don't want the malware to spread or communicate with other pc,servers,iot,network etc.</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/cbdbb5f2-f470-4c35-a90e-9b62f5ea2052" alt="" class="wp-image-5001"/>

<p>Note# you can turn it on/off anytime but once we download your malware.exe just make communcation are off.</p>

<p>On your Virtual box appilcation go to the running OS that we are using and click on the "setting" icon and go to Network change the NAT to "host only adapter"</p>

<p>We can test running internet browser + cmd ipsconfig then type ping google.com to be sure our network is isolated</p>


<!-- wp:separator -->
<hr class="wp-block-separator has-alpha-channel-opacity"/>
<!-- /wp:separator -->

<!-- wp:paragraph {"align":"center","backgroundColor":"pale-cyan-blue"} -->
<p class="has-text-align-center has-pale-cyan-blue-background-color has-background" id="1"><strong>SnapShot Our Virutal OS</strong></p>
<!-- /wp:paragraph -->

<img src="https://github.com/TommyP702/TanPham/assets/169327735/52981b50-8ed2-40c2-93f4-ea5cc3e3bdf9" alt="" class="wp-image-5001"/>

<p>It's important we keep our baseline setting for future projects incase of misconfiguration we can always rollback. I recommend we title the snapshot "Baseline 6/7/2024" just to keep thing nice and organize before we start breaking everything.</p>

<img src="https://github.com/TommyP702/TanPham/assets/169327735/3eca012c-a95d-40a9-8f1b-cb37b5c6b731" alt="" class="wp-image-5001"/>

